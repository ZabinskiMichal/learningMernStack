{"version":3,"sources":["context/AuthContext.js","hooks/useAuthContext.js","context/WorkoutContext.js","hooks/useWorkoutsContext.js","components/WorkoutDetails.js","components/WorkoutForm.js","pages/Home.js","pages/Login.js","hooks/useLogin.js","pages/Signup.js","hooks/useSignup.js","components/Navbar.js","hooks/useLogout.js","App.js","index.js"],"names":["AuthContext","createContext","authReducer","state","action","type","user","payload","AuthContextProvider","_ref","children","dispatch","useReducer","useEffect","JSON","parse","localStorage","getItem","console","log","React","createElement","Provider","value","useAuthContext","context","useContext","Error","WorkoutsContext","workoutsReducer","workouts","filter","w","_id","WorkoutsContextProvider","useWorkoutsContext","WorkoutDetails","workout","className","title","load","reps","formatDistanceToNow","Date","createdAt","addSuffix","onClick","async","response","fetch","method","headers","concat","token","json","ok","WorkoutForm","setTitle","useState","setLoad","setReps","error","setError","emptyFields","setEmptyFields","onSubmit","e","preventDefault","body","stringify","onChange","target","includes","Home","fetchWorkouts","map","key","Login","email","setEmail","password","setPassword","login","isLoading","useLogin","setIsLoading","setItem","disabled","Signup","signup","useSignup","Navbar","logout","useLogout","workoutsDispatch","removeItem","Link","to","handleClick","App","BrowserRouter","Routes","Route","path","element","Navigate","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"2LAGO,MAAMA,EAAcC,0BAEdC,EAAcA,CAACC,EAAOC,KAC/B,OAAOA,EAAOC,MACV,IAAK,QACD,MAAO,CAAEC,KAAMF,EAAOG,SAC1B,IAAK,SACD,MAAO,CAAED,KAAM,MACnB,QACI,OAAOH,IAKNK,EAAsBC,IAAmB,IAAlB,SAAEC,GAAUD,EAC5C,MAAON,EAAOQ,GAAYC,qBAAWV,EAAa,CAC9CI,KAAM,OAcV,OAVAO,oBAAU,KACN,MAAMP,EAAOQ,KAAKC,MAAMC,aAAaC,QAAQ,SAEzCX,GACAK,EAAS,CAAEN,KAAM,QAASE,QAASD,KAExC,IAEHY,QAAQC,IAAI,sBAAuBhB,GAG/BiB,IAAAC,cAACrB,EAAYsB,SAAQ,CAACC,MAAO,IAAIpB,EAAOQ,aAElCD,ICjCDc,EAAiBA,KAE1B,MAAMC,EAAUC,qBAAW1B,GAE3B,IAAIyB,EACA,MAAME,MAAM,0DAGhB,OAAOF,GCREG,EAAkB3B,0BAElB4B,EAAkBA,CAAC1B,EAAOC,KAEnC,OAAOA,EAAOC,MACV,IAAK,eACD,MAAO,CACHyB,SAAU1B,EAAOG,SAGzB,IAAK,iBACD,MAAO,CACHuB,SAAU,CAAC1B,EAAOG,WAAYJ,EAAM2B,WAE5C,IAAK,iBACD,MAAO,CACHA,SAAU3B,EAAM2B,SAASC,OAAQC,GAAMA,EAAEC,MAAQ7B,EAAOG,QAAQ0B,MAExE,QACI,OAAO9B,IAKN+B,EAA0BzB,IAAiB,IAAhB,SAACC,GAASD,EAE9C,MAAON,EAAOQ,GAAYC,qBAAWiB,EAAiB,CAClDC,SAAU,OAId,OACIV,IAAAC,cAACO,EAAgBN,SAAQ,CAACC,MAAO,IAAIpB,EAAOQ,aACtCD,ICjCDyB,EAAqBA,KAE9B,MAAMV,EAAUC,qBAAWE,GAE3B,IAAIH,EACA,MAAME,MAAM,qEAGhB,OAAOF,G,WCLI,SAASW,EAAc3B,GAAc,IAAb,QAAE4B,GAAS5B,EAE9C,MAAM,SAAEE,GAAawB,KACf,KAAE7B,GAASkB,IAqBjB,OACIJ,IAAAC,cAAA,OAAKiB,UAAU,mBACXlB,IAAAC,cAAA,UAAKgB,EAAQE,OACbnB,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,eAAqBgB,EAAQG,MACxCpB,IAAAC,cAAA,SAAGD,IAAAC,cAAA,cAAQ,UAAgBgB,EAAQI,MACnCrB,IAAAC,cAAA,SAAIqB,YAAoB,IAAIC,KAAKN,EAAQO,WAAY,CAAEC,WAAW,KAElEzB,IAAAC,cAAA,QAAMiB,UAAU,4BAA4BQ,QA1BhCC,UAEhB,IAAIzC,EACA,OAEJ,MAAM0C,QAAiBC,MAAM,iBAAmBZ,EAAQJ,IAAK,CACzDiB,OAAQ,SACRC,QAAS,CACL,cAAgB,UAADC,OAAY9C,EAAK+C,UAIlCC,QAAaN,EAASM,OAExBN,EAASO,IACT5C,EAAS,CAACN,KAAM,iBAAkBE,QAAS+C,MAWuB,WChC/D,SAASE,IAEpB,MAAM,SAAE7C,GAAawB,KACf,KAAE7B,GAASkB,KAEVe,EAAOkB,GAAYC,mBAAS,KAC5BlB,EAAMmB,GAAWD,mBAAS,KAC3BjB,EAAMmB,GAAWF,mBAAS,KACzBG,EAAOC,GAAYJ,mBAAS,OAC5BK,EAAaC,GAAkBN,mBAAS,IAyC/C,OAEItC,IAAAC,cAAA,QAAMiB,UAAU,SAAS2B,SAxCRlB,UAGjB,GAFAmB,EAAEC,kBAEG7D,EAED,YADAwD,EAAS,yBAIb,MAAMzB,EAAU,CAACE,QAAOC,OAAMC,QAExBO,QAAiBC,MAAM,gBAAiB,CAC1CC,OAAQ,OACRkB,KAAMtD,KAAKuD,UAAUhC,GACrBc,QAAS,CACL,eAAiB,mBACjB,cAAgB,UAADC,OAAY9C,EAAK+C,UAIlCC,QAAaN,EAASM,OAEvBN,EAASO,KACVO,EAASR,EAAKO,OACdG,EAAeV,EAAKS,cAGrBf,EAASO,KAERE,EAAS,IACTE,EAAQ,IACRC,EAAQ,IACRE,EAAS,MACTE,EAAe,IACf9C,QAAQC,IAAI,oBAAqBmC,GACjC3C,EAAS,CAACN,KAAM,iBAAkBE,QAAS+C,OAO3ClC,IAAAC,cAAA,UAAI,qBAEJD,IAAAC,cAAA,aAAO,oBACPD,IAAAC,cAAA,SACAhB,KAAK,OACLiE,SAAWJ,GAAMT,EAASS,EAAEK,OAAOhD,OACnCA,MAAOgB,EACPD,UAAWyB,EAAYS,SAAS,SAAW,QAAU,KAGrDpD,IAAAC,cAAA,aAAO,kBACPD,IAAAC,cAAA,SACAhB,KAAK,SACLiE,SAAWJ,GAAMP,EAAQO,EAAEK,OAAOhD,OAClCA,MAAOiB,EACPF,UAAWyB,EAAYS,SAAS,QAAU,QAAU,KAGpDpD,IAAAC,cAAA,aAAO,UACPD,IAAAC,cAAA,SACAhB,KAAK,SACLiE,SAAWJ,GAAMN,EAAQM,EAAEK,OAAOhD,OAClCA,MAAOkB,EACPH,UAAWyB,EAAYS,SAAS,QAAU,QAAU,KAKpDpD,IAAAC,cAAA,cAAQ,eACPwC,GAASzC,IAAAC,cAAA,OAAKiB,UAAU,SAASuB,IC/E/B,SAASY,IAEpB,MAAM,SAAC3C,EAAQ,SAAEnB,GAAYwB,KACvB,KAAE7B,GAASkB,IAsBjB,OApBAX,oBAAU,KAcHP,GAbmByC,WAClB,MAAMC,QAAiBC,MAAM,gBAAiB,CAC1CE,QAAS,CACL,cAAgB,UAADC,OAAY9C,EAAK+C,UAGlCC,QAAaN,EAASM,OAExBN,EAASO,IACT5C,EAAS,CAACN,KAAM,eAAgBE,QAAS+C,KAK7CoB,IAGL,CAAC/D,EAAUL,IAGVc,IAAAC,cAAA,OAAKiB,UAAU,QACXlB,IAAAC,cAAA,OAAKiB,UAAU,YACVR,GAAYA,EAAS6C,IAAKtC,GACvBjB,IAAAC,cAACe,EAAc,CAACwC,IAAKvC,EAAQJ,IAAKI,QAASA,MAInDjB,IAAAC,cAACmC,EAAW,OCrCT,SAASqB,IACpB,MAAOC,EAAOC,GAAYrB,mBAAS,KAC5BsB,EAAUC,GAAevB,mBAAS,KACnC,MAAEwB,EAAK,MAAErB,EAAK,UAAEsB,GCJFC,MACpB,MAAOvB,EAAOC,GAAYJ,mBAAS,OAC5ByB,EAAWE,GAAgB3B,mBAAS,OACrC,SAAE/C,GAAaa,IAiCrB,MAAO,CAAE0D,MA/BKnC,MAAO+B,EAAOE,KACxBK,GAAa,GACbvB,EAAS,MAET,MAAMd,QAAiBC,MAAM,kBAAmB,CAC5CC,OAAQ,OACRC,QAAS,CAAC,eAAgB,oBAC1BiB,KAAMtD,KAAKuD,UAAU,CAACS,QAAOE,eAGjC9D,QAAQC,IAAI6B,GAEZ,MAAMM,QAAaN,EAASM,OAExBN,EAASO,KACT8B,GAAa,GACbvB,EAASR,EAAKO,QAGfb,EAASO,KAERvC,aAAasE,QAAQ,OAAQxE,KAAKuD,UAAUf,IAG5C3C,EAAS,CAACN,KAAM,QAASE,QAAS+C,IAElC+B,GAAa,KAKLF,YAAWtB,UDhCSuB,GAQpC,OACIhE,IAAAC,cAAA,QAAMiB,UAAU,QAAQ2B,SAPPlB,UACjBmB,EAAEC,uBAEIe,EAAMJ,EAAOE,KAKf5D,IAAAC,cAAA,UAAI,SAEJD,IAAAC,cAAA,aAAO,WAEPD,IAAAC,cAAA,SACIhB,KAAK,QACLiE,SAAWJ,GAAMa,EAASb,EAAEK,OAAOhD,OACnCA,MAAOuD,IAGX1D,IAAAC,cAAA,SACIhB,KAAK,WACLiE,SAAWJ,GAAMe,EAAYf,EAAEK,OAAOhD,OACtCA,MAAOyD,IAGX5D,IAAAC,cAAA,UAAQkE,SAAUJ,GAAW,SAC5BtB,GAASzC,IAAAC,cAAA,OAAKiB,UAAU,SAASuB,IE9B/B,SAAS2B,IACpB,MAAOV,EAAOC,GAAYrB,mBAAS,KAC5BsB,EAAUC,GAAevB,mBAAS,KACpC,OAAE+B,EAAM,MAAE5B,EAAK,UAAEsB,GCJDO,MACrB,MAAO7B,EAAOC,GAAYJ,mBAAS,OAC5ByB,EAAWE,GAAgB3B,mBAAS,OACrC,SAAE/C,GAAaa,IA+BrB,MAAO,CAAEiE,OA7BM1C,MAAO+B,EAAOE,KACzBK,GAAa,GACbvB,EAAS,MAET,MAAMd,QAAiBC,MAAM,mBAAoB,CAC7CC,OAAQ,OACRC,QAAS,CAAC,eAAgB,oBAC1BiB,KAAMtD,KAAKuD,UAAU,CAACS,QAAOE,eAG3B1B,QAAaN,EAASM,OAExBN,EAASO,KACT8B,GAAa,GACbvB,EAASR,EAAKO,QAGfb,EAASO,KAERvC,aAAasE,QAAQ,OAAQxE,KAAKuD,UAAUf,IAG5C3C,EAAS,CAACN,KAAM,QAASE,QAAS+C,IAElC+B,GAAa,KAKJF,YAAWtB,UD9BQ6B,GAQpC,OACItE,IAAAC,cAAA,QAAMiB,UAAU,SAAS2B,SAPRlB,UACjBmB,EAAEC,uBAEIsB,EAAOX,EAAOE,KAKhB5D,IAAAC,cAAA,UAAI,WAEJD,IAAAC,cAAA,aAAO,WAEPD,IAAAC,cAAA,SACIhB,KAAK,QACLiE,SAAWJ,GAAMa,EAASb,EAAEK,OAAOhD,OACnCA,MAAOuD,IAGX1D,IAAAC,cAAA,SACIhB,KAAK,WACLiE,SAAWJ,GAAMe,EAAYf,EAAEK,OAAOhD,OACtCA,MAAOyD,IAEX5D,IAAAC,cAAA,UAAQkE,SAAUJ,GAAW,WAC5BtB,GAASzC,IAAAC,cAAA,OAAKiB,UAAU,SAASuB,IE3B/B,SAAS8B,IAEpB,MAAM,OAAEC,GCLaC,MACrB,MAAM,SAAElF,GAAaa,KACbb,SAAUmF,GAAqB3D,IAavC,MAAO,CAAEyD,OAXMA,KAGX5E,aAAa+E,WAAW,QAGxBpF,EAAS,CAACN,KAAM,WAChByF,EAAiB,CAACzF,KAAM,eAAgBE,QAAS,UDNlCsF,IACb,KAAEvF,GAASkB,IAMjB,OACIJ,IAAAC,cAAA,cACID,IAAAC,cAAA,OAAKiB,UAAU,aACXlB,IAAAC,cAAC2E,IAAI,CAACC,GAAG,KACL7E,IAAAC,cAAA,UAAI,mBAGRD,IAAAC,cAAA,WACKf,GAEDc,IAAAC,cAAA,WACID,IAAAC,cAAA,YAAOf,EAAKwE,OACZ1D,IAAAC,cAAA,UAAQyB,QAhBRoD,KAChBN,MAe8C,YAKhCtF,GAEFc,IAAAC,cAAA,WACID,IAAAC,cAAC2E,IAAI,CAACC,GAAG,UAAS,SAClB7E,IAAAC,cAAC2E,IAAI,CAACC,GAAG,WAAU,cEU5BE,MAlCf,WAEE,MAAM,KAAE7F,GAASkB,IAGjB,OACEJ,IAAAC,cAAA,OAAKiB,UAAU,OACblB,IAAAC,cAAC+E,IAAa,KACdhF,IAAAC,cAACsE,EAAM,MACLvE,IAAAC,cAAA,OAAKiB,UAAU,SAEblB,IAAAC,cAACgF,IAAM,KACLjF,IAAAC,cAACiF,IAAK,CACJC,KAAK,IACLC,QAASlG,EAAOc,IAAAC,cAACoD,EAAI,MAAMrD,IAAAC,cAACoF,IAAQ,CAACR,GAAG,aAG1C7E,IAAAC,cAACiF,IAAK,CACJC,KAAK,SACLC,QAAUlG,EAAmBc,IAAAC,cAACoF,IAAQ,CAACR,GAAG,MAAzB7E,IAAAC,cAACwD,EAAK,QAGzBzD,IAAAC,cAACiF,IAAK,CACJC,KAAK,UACLC,QAAUlG,EAAoBc,IAAAC,cAACoF,IAAQ,CAACR,GAAG,MAA1B7E,IAAAC,cAACmE,EAAM,a,MC1BzBkB,IAASC,WAAWC,SAASC,eAAe,SACpDC,OACH1F,IAAAC,cAACD,IAAM2F,WAAU,KACf3F,IAAAC,cAACb,EAAmB,KAClBY,IAAAC,cAACa,EAAuB,KACtBd,IAAAC,cAAC8E,EAAG,W","file":"static/js/main.abcfa5e2.chunk.js","sourcesContent":["import React from 'react';\nimport { createContext, useReducer, useEffect } from 'react';\n\nexport const AuthContext = createContext()\n\nexport const authReducer = (state, action) => {\n    switch(action.type){\n        case 'LOGIN':\n            return { user: action.payload }\n        case 'LOGOUT':\n            return { user: null}\n        default:\n            return state\n    }\n}\n\n\nexport const AuthContextProvider = ({ children }) => {\n    const [state, dispatch] = useReducer(authReducer, {\n        user: null\n    })\n\n    // ten use efect odpowiada za to,ze jesli odÅ›wieymy strone, user bedzie nadal zalogowany\n    useEffect(() => {\n        const user = JSON.parse(localStorage.getItem('user'))\n\n        if (user) {\n            dispatch({ type: 'LOGIN', payload: user})\n        }\n    }, []) // dzieki pustej tablicy ten use effect odpali sie tylko w przypadku pierwszego renderu komponentu\n\n    console.log(\"AuthContext state: \", state)\n\n    return (\n        <AuthContext.Provider value={{...state, dispatch}}>\n\n            { children }\n\n        </AuthContext.Provider>\n    )\n}","import { AuthContext } from \"../context/AuthContext\";\nimport { useContext } from \"react\";\n\nexport const useAuthContext = () => {\n\n    const context = useContext(AuthContext)\n    \n    if(!context){\n        throw Error(\"authContext must be used inside an AuthContextProvider\")\n    }\n\n    return context\n\n}","import React from \"react\";\nimport { createContext, useReducer} from \"react\";\n\nexport const WorkoutsContext = createContext()\n\nexport const workoutsReducer = (state, action) => {\n\n    switch(action.type) {\n        case 'SET_WORKOUTS':\n            return {\n                workouts: action.payload\n            }\n\n        case 'CREATE_WORKOUT': \n            return {\n                workouts: [action.payload, ...state.workouts]\n            }\n        case 'DELETE_WORKOUT':\n            return {\n                workouts: state.workouts.filter((w) => w._id !== action.payload._id)\n            }\n        default:\n            return state\n    }\n\n}\n\nexport const WorkoutsContextProvider = ({children}) => {\n\n    const [state, dispatch] = useReducer(workoutsReducer, {\n        workouts: null\n    })\n\n\n    return (\n        <WorkoutsContext.Provider value={{...state, dispatch}}>\n            { children }\n        </WorkoutsContext.Provider>\n    )\n\n}","import { WorkoutsContext } from \"../context/WorkoutContext\";\nimport { useContext } from \"react\";\n\nexport const useWorkoutsContext = () => {\n\n    const context = useContext(WorkoutsContext)\n    \n    if(!context){\n        throw Error(\"useWorkoutsContext must be used inside an WorkoutsContextProvider\")\n    }\n\n    return context\n\n}","import React from \"react\"\nimport { useWorkoutsContext } from \"../hooks/useWorkoutsContext\"\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow'\nimport { useAuthContext } from \"../hooks/useAuthContext\"\n\n\nexport default function WorkoutDetails({ workout }){\n\n    const { dispatch } = useWorkoutsContext()\n    const { user } = useAuthContext()\n\n    const handleClick = async () => {\n\n        if(!user){\n            return\n        }\n        const response = await fetch('/api/workouts/' + workout._id, {\n            method: 'DELETE',\n            headers: {\n                'Authorization': `Bearer ${user.token}`\n            }\n        })\n\n        const json = await response.json()\n        \n        if (response.ok){\n            dispatch({type: 'DELETE_WORKOUT', payload: json})\n        }   \n    }\n\n    return (\n        <div className=\"workout-details\">\n            <h4>{workout.title}</h4>\n            <p><strong>Loag (kg): </strong>{workout.load}</p>\n            <p><strong>Reps: </strong>{workout.reps}</p>\n            <p>{formatDistanceToNow(new Date(workout.createdAt), { addSuffix: true})}</p>\n\n            <span className=\"material-symbols-outlined\" onClick={handleClick}>delete</span>\n        </div>\n    )\n}","import React, { useState } from \"react\";\nimport { useWorkoutsContext } from '../hooks/useWorkoutsContext'\nimport { useAuthContext } from \"../hooks/useAuthContext\";\n\n\nexport default function WorkoutForm(){\n\n    const { dispatch } = useWorkoutsContext()\n    const { user } = useAuthContext()\n\n    const [title, setTitle] = useState('')\n    const [load, setLoad] = useState('')\n    const[reps, setReps] = useState('')\n    const [error, setError] = useState(null)\n    const [emptyFields, setEmptyFields] = useState([])\n\n\n    const handleSubmit = async(e) => {\n        e.preventDefault()\n\n        if (!user){\n            setError('You must be logged in')\n            return\n        }\n\n        const workout = {title, load, reps}\n\n        const response = await fetch('/api/workouts', {\n            method: 'POST',\n            body: JSON.stringify(workout), //stringify zmienia objekt w jsona\n            headers: {\n                'Content-Type' : 'application/json',\n                'Authorization': `Bearer ${user.token}`\n            }\n        })\n\n        const json = await response.json()\n\n        if (!response.ok){\n            setError(json.error)\n            setEmptyFields(json.emptyFields)\n        }\n\n        if(response.ok){\n\n            setTitle('')\n            setLoad('')\n            setReps('')\n            setError(null)\n            setEmptyFields([])\n            console.log(\"new workout added\", json)\n            dispatch({type: 'CREATE_WORKOUT', payload: json})\n        }\n    }\n    \n    return (\n\n        <form className=\"create\" onSubmit={handleSubmit}>\n            <h3>Add a new Workout</h3>\n\n            <label>Exercise Title: </label>\n            <input \n            type=\"text\"\n            onChange={(e) => setTitle(e.target.value)}\n            value={title}\n            className={emptyFields.includes('title') ? 'error' : ''}\n            />\n\n            <label>Load (in Kg): </label>\n            <input \n            type=\"number\"\n            onChange={(e) => setLoad(e.target.value)}\n            value={load}\n            className={emptyFields.includes('load') ? 'error' : ''}\n            />\n\n            <label>Reps: </label>\n            <input \n            type=\"number\"\n            onChange={(e) => setReps(e.target.value)}\n            value={reps}\n            className={emptyFields.includes('reps') ? 'error' : ''}\n\n            />\n\n\n            <button>Add Workout</button>\n            {error && <div className=\"error\">{error}</div>}\n\n\n        </form>\n\n\n    )\n\n}","import React, { useEffect } from \"react\"\nimport { useWorkoutsContext } from '../hooks/useWorkoutsContext'\nimport { useAuthContext } from \"../hooks/useAuthContext\"\n\n//components \nimport WorkoutDetails from '../components/WorkoutDetails'\nimport WorkoutForm from \"../components/WorkoutForm\"\n\nexport default function Home() {\n\n    const {workouts, dispatch} = useWorkoutsContext()\n    const { user } = useAuthContext()\n\n    useEffect(() => {\n        const fetchWorkouts = async () => {\n            const response = await fetch('/api/workouts', {\n                headers: {\n                    'Authorization': `Bearer ${user.token}`\n                }\n            })\n            const json = await response.json()\n\n            if (response.ok){\n                dispatch({type: 'SET_WORKOUTS', payload: json})\n            }\n        }\n\n        if(user){\n            fetchWorkouts()\n        }\n\n    }, [dispatch, user]) //tablica powoduje ze funckja odpala sie tylko w przypadku pierwszego renderu \n\n    return(\n        <div className=\"home\">\n            <div className=\"workours\">\n                {workouts && workouts.map((workout) => (\n                    <WorkoutDetails key={workout._id} workout={workout}/>\n                ))}\n            </div>\n\n            <WorkoutForm />\n    \n\n        </div>\n\n\n    )\n}","import React from 'react'\nimport { useState } from 'react'\nimport { useLogin } from '../hooks/useLogin'\n\nexport default function Login() {\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const { login, error, isLoading } = useLogin()\n\n    const handleSubmit = async(e) => {\n        e.preventDefault()\n\n        await login(email, password)\n    }\n\n    return (\n        <form className='login' onSubmit = {handleSubmit}>\n            <h3>Login</h3>\n\n            <label>Email: </label>\n\n            <input \n                type='email'    \n                onChange={(e) => setEmail(e.target.value)}\n                value={email}\n            />\n\n            <input  \n                type='password'    \n                onChange={(e) => setPassword(e.target.value)}\n                value={password}\n            />\n            \n            <button disabled={isLoading}>Login</button>\n            {error && <div className='error'>{error}</div>}\n\n        </form>\n    )\n\n}","import { useState } from \"react\";\nimport { useAuthContext } from \"./useAuthContext\";\n\nexport const useLogin = () => { //to jest hook\n    const [error, setError] = useState(null)\n    const [isLoading, setIsLoading] = useState(null)\n    const { dispatch } = useAuthContext()\n\n    const login = async (email, password) => {\n        setIsLoading(true)\n        setError(null)\n\n        const response = await fetch('/api/user/login', {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({email, password})\n        })\n\n        console.log(response)\n\n        const json = await response.json()\n\n        if(!response.ok){\n            setIsLoading(false)\n            setError(json.error)\n        }\n\n        if(response.ok){\n            // save the user to local storage - czyli tutaj jest jest email oraz authToken\n            localStorage.setItem('user', JSON.stringify(json))\n            \n            // update the auth context\n            dispatch({type: 'LOGIN', payload: json})\n\n            setIsLoading(false)\n        }\n\n    }\n\n    return { login, isLoading, error}\n    \n}","import React, { useState } from 'react'\nimport { useSignup } from '../hooks/useSignup'\n\n\nexport default function Signup() {\n    const [email, setEmail] = useState('')\n    const [password, setPassword] = useState('')\n    const{ signup, error, isLoading } = useSignup()\n\n    const handleSubmit = async(e) => {\n        e.preventDefault()\n\n        await signup(email, password)\n    }\n\n    return (\n        <form className='signup' onSubmit = {handleSubmit}>\n            <h3>Sign up</h3>\n\n            <label>Email: </label>\n\n            <input \n                type='email'    \n                onChange={(e) => setEmail(e.target.value)}\n                value={email}\n            />\n\n            <input  \n                type='password'    \n                onChange={(e) => setPassword(e.target.value)}\n                value={password}\n            />\n            <button disabled={isLoading}>Sign up</button>\n            {error && <div className='error'>{error}</div>}\n\n        </form>\n    )\n\n}","import { useState } from \"react\";\nimport { useAuthContext } from \"./useAuthContext\";\n\nexport const useSignup = () => {\n    const [error, setError] = useState(null)\n    const [isLoading, setIsLoading] = useState(null)\n    const { dispatch } = useAuthContext()\n\n    const signup = async (email, password) => {\n        setIsLoading(true)\n        setError(null)\n\n        const response = await fetch('/api/user/signup', {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({email, password})\n        })\n\n        const json = await response.json()\n\n        if(!response.ok){\n            setIsLoading(false)\n            setError(json.error)\n        }\n\n        if(response.ok){\n            // save the user to local storage - czyli tutaj jest jest email oraz authToken\n            localStorage.setItem('user', JSON.stringify(json))\n            \n            // update the auth context\n            dispatch({type: 'LOGIN', payload: json})\n\n            setIsLoading(false)\n        }\n\n    }\n\n    return { signup, isLoading, error}\n    \n}","import React from 'react'\nimport { useLogout } from '../hooks/useLogout'\nimport { useAuthContext } from '../hooks/useAuthContext'\n\nimport { Link } from 'react-router-dom'\n\nexport default function Navbar(){\n\n    const { logout } = useLogout()\n    const { user } = useAuthContext()\n\n    const handleClick = () => {\n        logout()\n    }\n\n    return (\n        <header>\n            <div className=\"container\">\n                <Link to='/'>\n                    <h1>Workout Buddy </h1>\n                </Link>\n\n                <nav>\n                    {user && (\n                        \n                    <div>\n                        <span>{user.email}</span>\n                        <button onClick={handleClick}>Logout</button>\n                    </div>\n                    \n                    )}\n\n                    {!user && (\n\n                    <div>\n                        <Link to=\"/login\">Login</Link>\n                        <Link to=\"/signup\">Signup</Link>\n                    </div>\n\n                    )}\n                    \n                </nav>\n\n            </div>\n        </header>\n    )\n}","import { useAuthContext } from \"./useAuthContext\"\nimport { useWorkoutsContext} from \"./useWorkoutsContext\"\n\nexport const useLogout = () => {\n    const { dispatch } = useAuthContext()\n    const { dispatch: workoutsDispatch } = useWorkoutsContext()\n\n    const logout = () => { //mozna zdeaktutowac token w backendzie\n\n        // remove user from storage\n        localStorage.removeItem('user')\n\n        // dispatch logout action\n        dispatch({type: 'LOGOUT'})\n        workoutsDispatch({type: 'SET_WORKOUTS', payload: null})\n\n    }\n\n    return { logout }\n\n}","import React from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'\nimport { useAuthContext } from './hooks/useAuthContext';\n\n\n//pages & components\nimport Home from './pages/Home'\nimport Login from './pages/Login';\nimport Signup from './pages/Signup';\nimport Navbar from './components/Navbar';\n\n\nfunction App() {\n  \n  const { user } = useAuthContext()\n\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n      <Navbar />\n        <div className='pages'>\n          \n          <Routes>\n            <Route \n              path=\"/\"\n              element={user ? <Home /> : <Navigate to=\"/login\" />}\n            />\n\n            <Route\n              path='/login'\n              element={!user ? <Login /> : <Navigate to=\"/\" />}\n            />\n\n            <Route\n              path='/signup'\n              element={!user ? <Signup /> : <Navigate to=\"/\" />}\n            />\n\n          </Routes>\n        </div>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport { WorkoutsContextProvider } from './context/WorkoutContext'\nimport { AuthContextProvider } from './context/AuthContext';\nimport { disableReactDevTools } from '@fvilers/disable-react-devtools'\n\nif(process.env.NODE_ENV === 'production ') disableReactDevTools() //only in production env\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <WorkoutsContextProvider>\n        <App />\n      </WorkoutsContextProvider>\n    </AuthContextProvider>\n  </React.StrictMode>\n);\n\n"],"sourceRoot":""}